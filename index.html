<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a472a">
    <title>Tennis Match Recorder</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <!-- jsPDF library for PDF export -->
    <!-- jsPDFÂ∫ìÁî®‰∫éPDFÂØºÂá∫ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <button class="nav-back hidden" id="back-button">
            <span>‚Üê</span>
        </button>
        <h1 class="nav-title" id="page-title">Matches</h1>
        <button class="nav-action" id="add-button" data-action="add-match">
            <span>+</span>
        </button>
    </nav>

    <!-- Main App Container -->
    <div id="app">
        <!-- Matches Page -->
        <div id="matches-page" class="page active">
            <div class="matches-list" id="matches-list">
                <!-- Matches will be loaded here -->
            </div>
            <div class="empty-state hidden" id="matches-empty">
                <p>No matches recorded yet</p>
                <button class="btn-primary" onclick="app.showPage('new-match')">Record First Match</button>
            </div>
        </div>

        <!-- Players Page -->
        <div id="players-page" class="page">
            <div class="players-list" id="players-list">
                <!-- Players will be loaded here -->
            </div>
            <div class="empty-state hidden" id="players-empty">
                <p>No players added yet</p>
                <button class="btn-primary" onclick="playerManager.showNewPlayerForm()">Add First Player</button>
            </div>
        </div>

        <!-- Log in Page -->
        <div id="settings-page" class="page">
            <div class="settings-content">
                <section class="settings-section" id="account-section">
                    <h2>Account</h2>
                    <div id="account-logged-out">
                        <div id="account-login-row">
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="account-email" placeholder="your@email.com" autocomplete="email">
                            </div>
                            <div class="form-group">
                                <label>Password</label>
                                <input type="password" id="account-password" placeholder="Password" autocomplete="current-password">
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-primary" id="account-login-btn">Login</button>
                                <button type="button" class="btn-secondary" id="account-register-btn">Register</button>
                            </div>
                            <div class="form-group" style="margin-top: 8px;">
                                <button type="button" class="btn-link" id="account-forgot-password-btn">Forgot password?</button>
                            </div>
                        </div>
                        <div id="account-forgot-block" class="hidden">
                            <div class="form-group">
                                <label>Email for reset link</label>
                                <input type="email" id="account-reset-email" placeholder="your@email.com" autocomplete="email">
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-primary" id="account-send-reset-btn">Send reset link</button>
                                <button type="button" class="btn-secondary" id="account-cancel-forgot-btn">Cancel</button>
                            </div>
                            <div id="account-forgot-status" class="setting-hint"></div>
                        </div>
                        <div id="account-recovery-block" class="hidden">
                            <p class="setting-hint">Set a new password for your account.</p>
                            <div class="form-group">
                                <label>New password</label>
                                <input type="password" id="account-new-password" placeholder="New password" autocomplete="new-password">
                            </div>
                            <div class="form-group">
                                <label>Confirm new password</label>
                                <input type="password" id="account-confirm-password" placeholder="Confirm" autocomplete="new-password">
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-primary" id="account-update-password-btn">Update password</button>
                            </div>
                            <div id="account-recovery-status" class="setting-hint"></div>
                        </div>
                        <div id="account-auth-status" class="setting-hint"></div>
                    </div>
                    <div id="account-logged-in" class="hidden">
                        <div class="detail-row"><span>Email</span><span id="account-display-email"></span></div>
                        <div class="detail-row"><span>Role</span><span id="account-display-role"></span></div>
                        <div class="detail-row" id="account-credits-row"><span>Credits</span><span id="account-display-credits"></span></div>
                        <button type="button" class="btn-secondary" id="account-logout-btn">Logout</button>
                    </div>
                </section>
                <section class="settings-section hidden" id="app-settings-section">
                    <h2>Setting</h2>
                    <div class="setting-row">
                        <span class="setting-label">Comment after match finish</span>
                        <label class="switch">
                            <input type="checkbox" id="setting-comment-after-match" aria-label="Comment after match finish">
                            <span class="switch-slider"></span>
                        </label>
                    </div>
                </section>
            </div>
        </div>

        <!-- New/Edit Player Page -->
        <div id="player-form-page" class="page">
            <div class="form-container">
                <h2 id="player-form-title">Add Player</h2>
                <form id="player-form">
                    <div class="form-group">
                        <label>Name *</label>
                        <input type="text" id="player-name" pattern="[a-zA-Z\s\-]+" title="Name can only contain letters (a-z, A-Z), spaces, and hyphens (-)" required>
                    </div>
                    <div class="form-group">
                        <label>Handedness *</label>
                        <select id="player-handedness" required>
                            <option value="righty">Righty</option>
                            <option value="lefty">Lefty</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Backhand Stroke Preference *</label>
                        <select id="player-backhand" required>
                            <option value="Single Hand">Single Hand</option>
                            <option value="Double Hand">Double Hand</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>UTR Rating (optional)</label>
                        <input type="number" id="player-utr" min="0" max="16" step="0.01" placeholder="0.00-16.00">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="app.showPage('players')">Cancel</button>
                        <button type="submit" class="btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- New Match Settings Page -->
        <div id="new-match-page" class="page">
            <div class="form-container">
                <h2>New Match</h2>
                <form id="match-settings-form">
                    <div class="form-group">
                        <label>Player 1</label>
                        <select id="match-player1" required>
                            <option value="">Select Player 1</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Player 2</label>
                        <select id="match-player2" required>
                            <option value="">Select Player 2</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            Number of Sets
                            <div style="display: flex; gap: 8px;">
                                <button type="button" class="btn-number-of-sets" data-value="1" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">1</button>
                                <button type="button" class="btn-number-of-sets" data-value="2" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">2</button>
                                <button type="button" class="btn-number-of-sets" data-value="3" style="padding: 8px 16px; background-color: #4caf50; color: white; border: 2px solid #4caf50; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">3</button>
                                <button type="button" class="btn-number-of-sets" data-value="4" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">4</button>
                                <button type="button" class="btn-number-of-sets" data-value="5" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">5</button>
                            </div>
                        </label>
                        <input type="hidden" id="match-sets" value="3" required>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            Games per Set
                            <div style="display: flex; gap: 8px;">
                                <button type="button" class="btn-games-per-set" data-value="3" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">3</button>
                                <button type="button" class="btn-games-per-set" data-value="4" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">4</button>
                                <button type="button" class="btn-games-per-set" data-value="5" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">5</button>
                                <button type="button" class="btn-games-per-set" data-value="6" style="padding: 8px 16px; background-color: #4caf50; color: white; border: 2px solid #4caf50; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">6</button>
                                <button type="button" class="btn-games-per-set" data-value="7" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">7</button>
                                <button type="button" class="btn-games-per-set" data-value="8" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">8</button>
                            </div>
                        </label>
                        <input type="hidden" id="match-games" value="6" required>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="match-ad-scoring" checked>
                            Ad Scoring
                        </label>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            Final Set Type
                            <div style="display: flex; gap: 8px;">
                                <button type="button" class="btn-final-set-type" id="btn-final-set-normal" data-value="Normal Final Set" style="padding: 8px 16px; background-color: #4caf50; color: white; border: 2px solid #4caf50; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">Normal Final Set</button>
                                <button type="button" class="btn-final-set-type" id="btn-final-set-super" data-value="Super Tie Break" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">Super Tie Break</button>
                            </div>
                        </label>
                        <input type="hidden" id="match-final-set" value="Normal Final Set" required>
                    </div>
                    <div class="form-group" id="tie-break-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            Normal Tie Break Games
                            <div style="display: flex; gap: 8px;">
                                <button type="button" class="btn-tie-break-games" data-value="5" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">5</button>
                                <button type="button" class="btn-tie-break-games" data-value="7" style="padding: 8px 16px; background-color: #4caf50; color: white; border: 2px solid #4caf50; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">7</button>
                                <button type="button" class="btn-tie-break-games" data-value="10" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">10</button>
                            </div>
                        </label>
                        <input type="hidden" id="match-tie-break-games" value="7" required>
                    </div>
                    <div class="form-group" id="tie-break-winby2-group">
                        <label>
                            <input type="checkbox" id="match-tie-break-winby2" checked>
                            Normal Tie Break Win by 2 Points
                        </label>
                    </div>
                    <div class="form-group" id="super-tie-break-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            Super Tie Break Points
                            <div style="display: flex; gap: 8px;">
                                <button type="button" class="btn-super-tie-break-points" data-value="5" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">5</button>
                                <button type="button" class="btn-super-tie-break-points" data-value="7" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">7</button>
                                <button type="button" class="btn-super-tie-break-points" data-value="10" style="padding: 8px 16px; background-color: #4caf50; color: white; border: 2px solid #4caf50; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">10</button>
                                <button type="button" class="btn-super-tie-break-points" data-value="12" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">12</button>
                            </div>
                        </label>
                        <input type="hidden" id="match-super-tie-break-points" value="10" required>
                    </div>
                    <div class="form-group" id="super-tie-break-winby2-group">
                        <label>
                            <input type="checkbox" id="match-super-tie-break-winby2" checked>
                            Super Tie Break Win by 2 Points
                        </label>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            Court Type
                            <div style="display: flex; gap: 8px;">
                                <button type="button" class="btn-court-type" data-value="Grass" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">Grass</button>
                                <button type="button" class="btn-court-type" data-value="Clay" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">Clay</button>
                                <button type="button" class="btn-court-type" data-value="Hard" style="padding: 8px 16px; background-color: #4caf50; color: white; border: 2px solid #4caf50; border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">Hard</button>
                                <button type="button" class="btn-court-type" data-value="Carpet" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">Carpet</button>
                            </div>
                        </label>
                        <input type="hidden" id="match-court-type" value="Hard" required>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="match-indoor">
                            Indoor
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="app.showPage('matches')">Cancel</button>
                        <button type="submit" class="btn-primary">Start Match</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Match Recording Page -->
        <div id="match-recording-page" class="page">
            <div class="live-match-container">
                <!-- Header -->
                <div class="live-match-header">
                    <h2>Live Match</h2>
                    <button class="menu-btn" id="match-menu-btn">‚ãØ</button>
                </div>

                <!-- Players Header -->
                <div class="players-header">
                    <div class="player-header-left">
                        <div class="player-name-large" id="player1-name">Player 1</div>
                    </div>
                    <div class="set-score-badge" id="set-score-badge">
                        <div>1</div>
                        <div>0-0</div>
                    </div>
                    <div class="player-header-right">
                        <div class="player-name-large" id="player2-name">Player 2</div>
                    </div>
                </div>

                <!-- Current Game Score -->
                <div class="current-game-score">
                    <div class="game-score-left">
                        <div class="game-score-value" id="player1-game-score">0</div>
                        <div class="serve-indicator-under" id="player1-serve-under">
                            <span class="tennis-ball-small">üéæ</span>
                            <span class="tennis-ball-small">üéæ</span>
                        </div>
                    </div>
                    <div class="game-score-divider"></div>
                    <div class="game-score-right">
                        <div class="game-score-value" id="player2-game-score">0</div>
                        <div class="serve-indicator-under" id="player2-serve-under">
                            <span class="tennis-ball-small">üéæ</span>
                            <span class="tennis-ball-small">üéæ</span>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons - Left Side (Player 1) -->
                <div class="action-buttons-container">
                    <div class="player-buttons-left">
                        <!-- Player 1 as Server -->
                        <div class="server-buttons hidden" id="player1-server-buttons">
                            <button class="action-btn error-btn" data-action="serve-fault" data-player="player1">SERVE FAULT</button>
                            <div class="button-row">
                                <button class="action-btn success-btn" data-action="ace" data-player="player1">ACE</button>
                                <button class="action-btn success-btn" data-action="winner" data-player="player1">WINNER</button>
                            </div>
                            <button class="action-btn error-btn" data-action="unforced-error" data-player="player1">UNFORCED ERROR</button>
                            <button class="action-btn error-btn" data-action="forced-error" data-player="player1">FORCED ERROR</button>
                        </div>
                        <!-- Player 1 as Receiver -->
                        <div class="receiver-buttons hidden" id="player1-receiver-buttons">
                            <button class="action-btn error-btn" data-action="return-error" data-player="player1">RETURN ERROR</button>
                            <button class="action-btn success-btn" data-action="receiver-winner" data-player="player1">WINNER</button>
                            <button class="action-btn error-btn" data-action="receiver-unforced-error" data-player="player1">UNFORCED ERROR</button>
                            <button class="action-btn error-btn" data-action="receiver-forced-error" data-player="player1">FORCED ERROR</button>
                        </div>
                    </div>

                    <div class="player-buttons-right">
                        <!-- Player 2 as Server -->
                        <div class="server-buttons hidden" id="player2-server-buttons">
                            <button class="action-btn error-btn" data-action="serve-fault" data-player="player2">SERVE FAULT</button>
                            <div class="button-row">
                                <button class="action-btn success-btn" data-action="ace" data-player="player2">ACE</button>
                                <button class="action-btn success-btn" data-action="winner" data-player="player2">WINNER</button>
                            </div>
                            <button class="action-btn error-btn" data-action="unforced-error" data-player="player2">UNFORCED ERROR</button>
                            <button class="action-btn error-btn" data-action="forced-error" data-player="player2">FORCED ERROR</button>
                        </div>
                        <!-- Player 2 as Receiver -->
                        <div class="receiver-buttons hidden" id="player2-receiver-buttons">
                            <button class="action-btn error-btn" data-action="return-error" data-player="player2">RETURN ERROR</button>
                            <button class="action-btn success-btn" data-action="receiver-winner" data-player="player2">WINNER</button>
                            <button class="action-btn error-btn" data-action="receiver-unforced-error" data-player="player2">UNFORCED ERROR</button>
                            <button class="action-btn error-btn" data-action="receiver-forced-error" data-player="player2">FORCED ERROR</button>
                        </div>
                    </div>
                </div>

                <!-- Undo Button -->
                <button class="undo-btn" id="undo-btn">
                    <span class="undo-icon">‚Ü∂</span>
                    <span>UNDO</span>
                </button>
            </div>
        </div>

        <!-- Shot Type Selection Modal -->
        <div id="shot-type-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-title">Select Shot Type</h3>
                    <button class="modal-close" id="modal-close">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="shot-type-grid" id="shot-type-options">
                        <!-- Shot type buttons will be generated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Match End Confirmation Modal -->
        <div id="match-end-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Match Completed</h3>
                </div>
                <div class="modal-body">
                    <p style="margin-bottom: 20px; text-align: center;">The match has ended. What would you like to do?</p>
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button id="match-end-undo-btn" class="btn-secondary" style="flex: 1;">Undo last point</button>
                        <button id="match-end-finish-btn" class="btn-primary" style="flex: 1;">Finish Match</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Match Settings Modal -->
        <div id="match-settings-modal" class="modal hidden">
            <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
                <div class="modal-header">
                    <h3>Match Settings</h3>
                    <button class="modal-close" id="match-settings-close">√ó</button>
                </div>
                <div class="modal-body">
                    <form id="match-settings-form-inline">
                        <!-- Number of Sets -->
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                Number of Sets
                                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    <button type="button" class="btn-number-of-sets-inline" data-value="1" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">1</button>
                                    <button type="button" class="btn-number-of-sets-inline" data-value="2" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">2</button>
                                    <button type="button" class="btn-number-of-sets-inline" data-value="3" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">3</button>
                                    <button type="button" class="btn-number-of-sets-inline" data-value="4" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">4</button>
                                    <button type="button" class="btn-number-of-sets-inline" data-value="5" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">5</button>
                                </div>
                            </label>
                            <input type="hidden" id="match-sets-inline" value="3">
                        </div>
                        
                        <!-- Games per Set -->
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                Games per Set
                                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    <button type="button" class="btn-games-per-set-inline" data-value="3" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">3</button>
                                    <button type="button" class="btn-games-per-set-inline" data-value="4" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">4</button>
                                    <button type="button" class="btn-games-per-set-inline" data-value="5" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">5</button>
                                    <button type="button" class="btn-games-per-set-inline" data-value="6" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">6</button>
                                    <button type="button" class="btn-games-per-set-inline" data-value="7" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">7</button>
                                    <button type="button" class="btn-games-per-set-inline" data-value="8" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">8</button>
                                </div>
                            </label>
                            <input type="hidden" id="match-games-inline" value="6">
                        </div>
                        
                        <!-- Ad Scoring -->
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="match-ad-scoring-inline">
                                Ad Scoring
                            </label>
                        </div>
                        
                        <!-- Final Set Type -->
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                Final Set Type
                                <div style="display: flex; gap: 8px;">
                                    <button type="button" class="btn-final-set-type-inline" id="btn-final-set-normal-inline" data-value="Normal Final Set" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">Normal Final Set</button>
                                    <button type="button" class="btn-final-set-type-inline" id="btn-final-set-super-inline" data-value="Super Tie Break" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">Super Tie Break</button>
                                </div>
                            </label>
                            <input type="hidden" id="match-final-set-inline" value="Normal Final Set">
                        </div>
                        
                        <!-- Normal Tie Break Games -->
                        <div class="form-group" id="tie-break-group-inline">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                Normal Tie Break Games
                                <div style="display: flex; gap: 8px;">
                                    <button type="button" class="btn-tie-break-games-inline" data-value="5" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">5</button>
                                    <button type="button" class="btn-tie-break-games-inline" data-value="7" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">7</button>
                                    <button type="button" class="btn-tie-break-games-inline" data-value="10" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">10</button>
                                </div>
                            </label>
                            <input type="hidden" id="match-tie-break-games-inline" value="7">
                        </div>
                        
                        <!-- Normal Tie Break Win by 2 -->
                        <div class="form-group" id="tie-break-winby2-group-inline">
                            <label>
                                <input type="checkbox" id="match-tie-break-winby2-inline">
                                Normal Tie Break Win by 2 Points
                            </label>
                        </div>
                        
                        <!-- Super Tie Break Points -->
                        <div class="form-group" id="super-tie-break-group-inline">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                Super Tie Break Points
                                <div style="display: flex; gap: 8px;">
                                    <button type="button" class="btn-super-tie-break-points-inline" data-value="5" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">5</button>
                                    <button type="button" class="btn-super-tie-break-points-inline" data-value="7" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">7</button>
                                    <button type="button" class="btn-super-tie-break-points-inline" data-value="10" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">10</button>
                                    <button type="button" class="btn-super-tie-break-points-inline" data-value="12" style="padding: 8px 16px; background-color: var(--card-background); color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 20px; cursor: pointer; font-size: 14px; font-weight: 600; white-space: nowrap;">12</button>
                                </div>
                            </label>
                            <input type="hidden" id="match-super-tie-break-points-inline" value="10">
                        </div>
                        
                        <!-- Super Tie Break Win by 2 -->
                        <div class="form-group" id="super-tie-break-winby2-group-inline">
                            <label>
                                <input type="checkbox" id="match-super-tie-break-winby2-inline">
                                Super Tie Break Win by 2 Points
                            </label>
                        </div>
                        
                        <div class="form-actions" style="margin-top: 20px; display: flex; gap: 10px;">
                            <button type="button" class="btn-secondary" id="match-settings-cancel-btn" style="flex: 1;">Cancel</button>
                            <button type="button" class="btn-primary" id="match-settings-save-btn" style="flex: 1;">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Match Detail Page -->
        <div id="match-detail-page" class="page">
            <div class="match-detail-container" id="match-detail-content">
                <!-- Match details will be loaded here -->
            </div>
        </div>

        <!-- Player Statistics Page -->
        <div id="player-stats-page" class="page">
            <div class="player-stats-container" id="player-stats-content">
                <!-- Player statistics will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Bottom Tab Navigation -->
    <nav class="tab-bar">
        <button class="tab-button active" data-page="matches">
            <span class="tab-icon">üéæ</span>
            <span class="tab-label">Matches</span>
        </button>
        <button class="tab-button" data-page="players">
            <span class="tab-icon">üë•</span>
            <span class="tab-label">Players</span>
        </button>
        <button class="tab-button" data-page="settings">
            <span class="tab-icon">‚öôÔ∏è</span>
            <span class="tab-label">Log in</span>
        </button>
    </nav>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>

    <!-- Supabase (for auth) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/models.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/match-engine.js"></script>
    <script src="js/statistics.js?v=2"></script>
    <script src="js/player-manager.js"></script>
    <script src="js/match-recorder.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/insufficient-credits-modal.js"></script>
    <script src="js/app.js?v=2"></script>
</body>
</html>

